
<head>
  <!-- Plotly.js -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
	<h2> Version 3 </h2>
  <div id="myDiv"><!-- Plotly chart will be drawn inside this DIV --></div>

  FPS: <div id="fps"></div>

  <script>
	var fps = {	startTime : 0,	frameNumber : 0,	getFPS : function(){		this.frameNumber++;		var d = new Date().getTime(),			currentTime = ( d - this.startTime ) / 1000,			result = Math.floor( ( this.frameNumber / currentTime ) );		if( currentTime > 1 ){			this.startTime = new Date().getTime();			this.frameNumber = 0;		}		return result;	}	};
	
	function updateGraph()
	{
	//var url='http://localhost:1234/demoData2';
	var url='http://209.9.36.2:1234/demoData2';
	Plotly.d3.json(url, function(error, data) 
	{
  		if (error) return console.warn(error);

		var axisTemplate = {
  			range: [data.X0, data.X1],
			autorange: false,
  			showgrid: true,
  			zeroline: false,
  			linecolor: 'black',
  			showticklabels: true,
  			ticks: ''
		};

		var layout = {
  			title: 'Heatmap test',
  			xaxis: axisTemplate,
  			yaxis: axisTemplate,
  			showlegend: false,
		};

		var d = [
		{
			colorscale: 'Jet',
			z: data.Data,
			zmin: 0,
			zmax: 4000,
			type: 'heatmap'			
		}
		];		

 		Plotly.newPlot('myDiv', d, layout);

		document.getElementById('fps').innerHTML = fps.getFPS();

	});

	setTimeout(updateGraph, 50);
	}

	updateGraph();
  </script>
</body>
